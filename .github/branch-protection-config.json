{
  "branch_protection_rules": [
    {
      "branch": "master",
      "protection": {
        "required_status_checks": {
          "strict": true,
          "contexts": [
            "🎵 Audio Quality Preservation Check",
            "🧪 Backend Tests with Audio Validation", 
            "🔗 Integration Tests with MinIO",
            "🎨 Frontend Tests with Upload Validation",
            "🔒 Security Scan",
            "🏗️ Build Test",
            "🚫 Block Dangerous Audio Patterns",
            "Comprehensive PR Validation / PR Analysis & Labeling",
            "Comprehensive PR Validation / Backend Quality & Testing",
            "Comprehensive PR Validation / Frontend Quality & Testing", 
            "Comprehensive PR Validation / Security Scanning",
            "Comprehensive PR Validation / Docker Build & Security",
            "Comprehensive PR Validation / Integration Testing",
            "Comprehensive PR Validation / Validation Summary"
          ]
        },
        "enforce_admins": false,
        "required_pull_request_reviews": {
          "required_approving_review_count": 1,
          "dismiss_stale_reviews": true,
          "require_code_owner_reviews": true,
          "dismissal_restrictions": {
            "users": [],
            "teams": []
          },
          "require_last_push_approval": true
        },
        "restrictions": null,
        "allow_force_pushes": false,
        "allow_deletions": false,
        "block_creations": false,
        "required_conversation_resolution": true,
        "lock_branch": false,
        "allow_fork_syncing": true
      }
    },
    {
      "branch": "main", 
      "protection": {
        "required_status_checks": {
          "strict": true,
          "contexts": [
            "🎵 Audio Quality Preservation Check",
            "🧪 Backend Tests with Audio Validation", 
            "🔗 Integration Tests with MinIO",
            "🎨 Frontend Tests with Upload Validation",
            "🔒 Security Scan",
            "🏗️ Build Test",
            "🚫 Block Dangerous Audio Patterns",
            "Comprehensive PR Validation / PR Analysis & Labeling",
            "Comprehensive PR Validation / Backend Quality & Testing",
            "Comprehensive PR Validation / Frontend Quality & Testing",
            "Comprehensive PR Validation / Security Scanning", 
            "Comprehensive PR Validation / Docker Build & Security",
            "Comprehensive PR Validation / Integration Testing",
            "Comprehensive PR Validation / Validation Summary"
          ]
        },
        "enforce_admins": false,
        "required_pull_request_reviews": {
          "required_approving_review_count": 1,
          "dismiss_stale_reviews": true,
          "require_code_owner_reviews": true,
          "dismissal_restrictions": {
            "users": [],
            "teams": []
          },
          "require_last_push_approval": true
        },
        "restrictions": null,
        "allow_force_pushes": false,
        "allow_deletions": false,
        "block_creations": false,
        "required_conversation_resolution": true,
        "lock_branch": false,
        "allow_fork_syncing": true
      }
    }
  ],
  "repository_settings": {
    "allow_squash_merge": true,
    "allow_merge_commit": false,
    "allow_rebase_merge": true,
    "delete_branch_on_merge": true,
    "allow_update_branch": true,
    "use_squash_pr_title_as_default": true,
    "squash_merge_commit_title": "PR_TITLE",
    "squash_merge_commit_message": "PR_BODY",
    "merge_commit_title": "MERGE_MESSAGE",
    "merge_commit_message": "PR_TITLE"
  },
  "rulesets": [
    {
      "name": "Comprehensive Quality Gates",
      "target": "branch",
      "enforcement": "active",
      "conditions": {
        "ref_name": {
          "include": ["refs/heads/master", "refs/heads/main"]
        }
      },
      "rules": [
        {
          "type": "required_status_checks",
          "parameters": {
            "strict_required_status_checks_policy": true,
            "required_status_checks": [
              {
                "context": "Comprehensive PR Validation / Validation Summary",
                "integration_id": null
              }
            ]
          }
        },
        {
          "type": "pull_request", 
          "parameters": {
            "required_approving_review_count": 1,
            "dismiss_stale_reviews_on_push": true,
            "require_code_owner_review": true,
            "require_last_push_approval": false,
            "required_review_thread_resolution": true
          }
        },
        {
          "type": "non_fast_forward"
        },
        {
          "type": "creation"
        },
        {
          "type": "update"
        },
        {
          "type": "deletion"
        }
      ]
    },
    {
      "name": "Development Branch Protection", 
      "target": "branch",
      "enforcement": "active",
      "conditions": {
        "ref_name": {
          "include": ["refs/heads/develop", "refs/heads/dev", "refs/heads/staging"]
        }
      },
      "rules": [
        {
          "type": "required_status_checks",
          "parameters": {
            "strict_required_status_checks_policy": false,
            "required_status_checks": [
              {
                "context": "Comprehensive PR Validation / Backend Quality & Testing"
              },
              {
                "context": "Comprehensive PR Validation / Frontend Quality & Testing"
              },
              {
                "context": "Comprehensive PR Validation / Security Scanning"
              }
            ]
          }
        },
        {
          "type": "pull_request",
          "parameters": {
            "required_approving_review_count": 1,
            "dismiss_stale_reviews_on_push": false,
            "require_code_owner_review": false,
            "require_last_push_approval": false,
            "required_review_thread_resolution": false
          }
        }
      ]
    }
  ]
}