# Sermon Uploader â€“ Backend environment template
#
# IMPORTANT:
# - Never commit real secrets. This file is safe to commit because it contains placeholders only.
# - Your production secrets should live in GitHub Secrets and be injected during deploy.
# - Local development can use a private, ignored file `backend/.env`.

# =====================
# MinIO Configuration
# =====================
MINIO_ENDPOINT=localhost:9000
MINIO_ACCESS_KEY=change-me
MINIO_SECRET_KEY=change-me
MINIO_SECURE=false
MINIO_BUCKET=sermons

# Public MinIO endpoint for browser uploads (presigned URLs)
# Set this to a hostname or IP that the client (browser) can reach directly.
# Examples:
#   MINIO_PUBLIC_ENDPOINT=minio.example.com
#   MINIO_PUBLIC_ENDPOINT=192.168.1.127:9000
# Leave blank to use internal endpoint (not recommended for browser uploads).
MINIO_PUBLIC_ENDPOINT=
MINIO_PUBLIC_SECURE=false

# =====================
# Notifications
# =====================
# Provide via GitHub Secrets in CI/CD for production.
# For local testing, you may paste a webhook here but DO NOT COMMIT your local `.env`.
DISCORD_WEBHOOK_URL=

# =====================
# App Behavior
# =====================
WAV_SUFFIX=_raw
AAC_SUFFIX=_streamable
BATCH_THRESHOLD=2
PORT=8000

# =====================
# Performance & Uploads
# =====================
# Reasonable defaults for Pi; adjust as needed.
MAX_CONCURRENT_UPLOADS=3
CHUNK_SIZE=1048576           # 1MB
MAX_UPLOAD_SIZE=2147483648   # 2GB

# Optional Pi optimizations
PI_OPTIMIZATION=true
MAX_MEMORY_MB=800
THERMAL_THROTTLING=true
THERMAL_THRESHOLD_C=75.0
GOGC=100
MAX_GOROUTINES=100

# Buffer and I/O tuning
BUFFER_POOL_ENABLED=true
SMALL_BUFFER_SIZE=4096
MEDIUM_BUFFER_SIZE=32768
LARGE_BUFFER_SIZE=262144
HUGE_BUFFER_SIZE=1048576
IO_BUFFER_SIZE=32768
ENABLE_ZERO_COPY=true
STREAMING_THRESHOLD=1048576

# Connection pooling
MAX_IDLE_CONNS=10
MAX_CONNS_PER_HOST=5
CONN_TIMEOUT=30
KEEP_ALIVE=30

# Notes:
# - Keep this file as a template only. Actual values belong in backend/.env (gitignored) or GitHub Secrets.
# - To support large browser uploads, ensure MINIO_PUBLIC_ENDPOINT points to a reachable host.

