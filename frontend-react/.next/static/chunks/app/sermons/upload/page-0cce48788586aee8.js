(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[947],{9266:function(e,s,l){Promise.resolve().then(l.bind(l,1015))},1015:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return n}});var t=l(7437),a=l(2265),r=l(5048);function o(e){let{files:s,uploadProgress:l,onRemove:a}=e;return(0,t.jsx)("div",{className:"space-y-3",children:s.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center flex-1",children:[(0,t.jsx)("span",{className:"text-2xl mr-3",children:"\uD83C\uDFB5"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:e.name}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";let l=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,l)).toFixed(s<0?0:s))+" "+["Bytes","KB","MB","GB"][l]}(e.size)}),void 0!==l[e.name]&&(0,t.jsxs)("div",{className:"mt-2",children:[(0,t.jsx)("div",{className:"bg-gray-200 rounded-full h-2 overflow-hidden",children:(0,t.jsx)("div",{className:"bg-purple-600 h-full transition-all duration-300",style:{width:"".concat(l[e.name],"%")}})}),(0,t.jsxs)("p",{className:"text-xs text-gray-600 mt-1",children:[Math.round(l[e.name]),"%"]})]})]})]}),(0,t.jsx)("button",{onClick:()=>a(e.name),className:"ml-4 text-red-500 hover:text-red-700",children:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},e.name))})}function n(){let[e,s]=(0,a.useState)([]),[l,n]=(0,a.useState)(!1),[c,i]=(0,a.useState)({}),d=(0,a.useCallback)(e=>{s(s=>[...s,...e])},[]),{getRootProps:m,getInputProps:x,isDragActive:h}=(0,r.uI)({onDrop:d,accept:{"audio/*":[".wav",".mp3",".aac",".m4a"]},multiple:!0}),p=async()=>{for(let s of(n(!0),console.log("Starting upload for",e.length,"files"),e)){let e=new FormData;e.append("file",s);try{let l=new XMLHttpRequest;l.upload.addEventListener("progress",e=>{if(e.lengthComputable){let l=e.loaded/e.total*100;console.log("Upload progress for ".concat(s.name,": ").concat(l.toFixed(2),"%")),i(e=>({...e,[s.name]:l}))}}),l.onload=()=>{console.log("Upload response for ".concat(s.name,": Status ").concat(l.status),l.responseText),200===l.status?(console.log("✅ Upload successful: ".concat(s.name)),alert("✅ Upload successful: ".concat(s.name))):(console.error("❌ Upload failed for ".concat(s.name,": Status ").concat(l.status)),alert("❌ Upload failed for ".concat(s.name,": ").concat(l.responseText)))},l.onerror=()=>{console.error("❌ Network error uploading ".concat(s.name)),alert("❌ Network error uploading ".concat(s.name))};let t="admin.wpgc.church"===window.location.hostname?"http://api.wpgc.church":"https://api.wpgc.church",a="".concat(t,"/api/uploads/sermon");console.log("Uploading ".concat(s.name," to: ").concat(a)),l.open("POST",a),l.send(e)}catch(e){console.error("Error uploading ".concat(s.name,":"),e)}}n(!1)};return(0,t.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Upload Sermons"}),(0,t.jsx)("p",{className:"text-gray-600 mt-2",children:"Upload sermon audio files to the church library"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"lg:col-span-2",children:[(0,t.jsxs)("div",{...m(),className:"border-2 border-dashed rounded-lg p-12 text-center cursor-pointer transition-colors ".concat(h?"border-purple-500 bg-purple-50":"border-gray-300 hover:border-purple-400 bg-white"),children:[(0,t.jsx)("input",{...x()}),(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)("span",{className:"text-6xl",children:"\uD83C\uDFB5"})}),(0,t.jsx)("p",{className:"text-xl font-medium text-gray-700 mb-2",children:h?"Drop the files here...":"Drag & drop sermon files here"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"or click to select files"}),(0,t.jsx)("p",{className:"text-xs text-gray-400 mt-4",children:"Supported formats: WAV, MP3, AAC, M4A"})]}),e.length>0&&(0,t.jsxs)("div",{className:"mt-6 bg-white rounded-lg shadow-sm p-6",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold mb-4",children:["Files to Upload (",e.length,")"]}),(0,t.jsx)(o,{files:e,uploadProgress:c,onRemove:e=>{s(s=>s.filter(s=>s.name!==e)),i(s=>{let l={...s};return delete l[e],l})}}),(0,t.jsxs)("div",{className:"mt-6 flex justify-end",children:[(0,t.jsx)("button",{onClick:()=>s([]),className:"mr-4 px-4 py-2 text-gray-600 hover:text-gray-800",disabled:l,children:"Clear All"}),(0,t.jsx)("button",{onClick:p,disabled:l||0===e.length,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Uploading...":"Upload ".concat(e.length," Files")})]})]})]}),(0,t.jsxs)("div",{className:"lg:col-span-1",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Upload Statistics"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Total Files"}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:e.length})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Total Size"}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";let l=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,l)).toFixed(s<0?0:s))+" "+["Bytes","KB","MB","GB"][l]}(e.reduce((e,s)=>e+s.size,0))})]}),l&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Upload Speed"}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:"-- MB/s"})]})]})]}),(0,t.jsxs)("div",{className:"bg-blue-50 rounded-lg p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2 text-blue-900",children:"Quick Tips"}),(0,t.jsxs)("ul",{className:"text-sm text-blue-800 space-y-2",children:[(0,t.jsx)("li",{children:"• Upload multiple files at once"}),(0,t.jsx)("li",{children:"• Files are automatically processed"}),(0,t.jsx)("li",{children:"• Duplicates are detected automatically"}),(0,t.jsx)("li",{children:"• Maximum file size: 2GB per file"})]})]})]})]})]})}}},function(e){e.O(0,[48,971,23,744],function(){return e(e.s=9266)}),_N_E=e.O()}]);